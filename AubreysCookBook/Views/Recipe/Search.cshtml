@model IEnumerable<Recipe>


<h2>Recipes</h2>

@using (Html.BeginForm("Search", "Recipe", "Get"))
{
    <p id="FindRecipe">
        Find by recipe name: @Html.TextBox("searchString")
        <input type="submit" value="Search" />
    </p>
}

<div style="display: block">
    <a id="InsertRecipe" href="/Recipe/InsertRecipe/">Add a New Recipe</a>
</div>

<table class="table">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Recipe Description</th>
        <th>Category ID</th>
        <th>Ingredients</th>
        <th>Example Image</th>
    </tr>

    @foreach (var recipe in @Model)
    {
        <tr id ="TableRow">
            <td><a id="RecipeView" href=/Recipe/ViewRecipe/@recipe.RecipeID>@recipe.RecipeID</a></td>
            <td>@recipe.Name</td>
            <td>@recipe.RecipeDescription</td>
            @switch (recipe.CategoryID)
            {
                case 1:
                    <td>Cakes</td>
                    break;
                case 2:
                    <td>Cookies</td>
                    break;
                case 3:
                    <td>Muffins</td>
                    break;
                case 4:
                    <td>Breads</td>
                    break;
                case 5:
                    <td>Garnishes</td>
                    break;
                case 6:
                    <td>Custards</td>
                    break;
                case 7:
                    <td>Crusts</td>
                    break;
                case 8:
                    <td>Pies/Tarts</td>
                    break;
                case 9:
                    <td>Breakfasts</td>
                    break;
            }

            <td>@recipe.Ingredients</td>
            @* <td><img src=@recipe.ImagePath/></td> *@
            <td>
                <img id="ExampleImageIDSearch" src="~/@recipe.ImagePath" alt="Image" />
          @*  <img id="ExampleImageIDSearchDefault"  src="@Url.Content(recipe.ImagePath)" alt="Image" /> *@
               @*  @if (!string.IsNullOrEmpty(recipe.ImagePath))
                {
                    <img id="ExampleImageIDSearch" src="~/@recipe.ImagePath" alt="Image" />
                }
                else
                {
                    //recipe.ImagePath = Url.Content(recipe.ImagePath);
                    <img id="ExampleImageIDSearchDefault" src="@Url.Content(recipe.ImagePath)" alt="Image" />
                } *@

            </td>

        </tr>
    }

</table>
         @*    <script>
                //var imageContainer = document.getElementById("ImageContainer");
    var recipeImage = document.getElementById("ExampleImageIDSearch");
    var defaultImage = document.getElementById("ExampleImageIDSearchDefault");

                recipeImage.onerror = function () {
                    // Hide the recipe image and show the default image if the recipe image fails to load
                     recipeImage.style.display = "none";
                     defaultImage.style.display = "none";
                    //imageContainer.style.display = "none";
                    recipeImage.removeAttribute("alt");
                    defaultImage.removeAttribute("alt");
                    
                };
            </script *@>